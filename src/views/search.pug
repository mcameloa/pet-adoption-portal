extends layout

block content
  section.search-hero
    h1 Buscar Mascotas
    p.subtitle Encuentra a tu compa침ero perfecto usando nuestros filtros de b칰squeda

  section.search-container
    .search-filters
      h2 Filtros de B칰squeda
      form.search-form(action="/search" method="GET")
        .form-group
          label(for="type") Tipo de Mascota
          select#type(name="type")
            option(value="" selected=(!filters || !filters.type)) Todos
            option(value="perro" selected=(filters && filters.type === "perro")) Perro
            option(value="gato" selected=(filters && filters.type === "gato")) Gato
            option(value="otro" selected=(filters && filters.type === "otro")) Otro
        
        .form-group
          label(for="age") Edad
          select#age(name="age")
            option(value="" selected=(!filters || !filters.age)) Todas las edades
            option(value="cachorro" selected=(filters && filters.age === "cachorro")) Cachorro/Joven (0-1 a침o)
            option(value="adulto" selected=(filters && filters.age === "adulto")) Adulto (1-7 a침os)
            option(value="senior" selected=(filters && filters.age === "senior")) Senior (7+ a침os)
        
        .form-group
          label(for="size") Tama침o
          select#size(name="size")
            option(value="" selected=(!filters || !filters.size)) Todos los tama침os
            option(value="peque침o" selected=(filters && filters.size === "peque침o")) Peque침o
            option(value="mediano" selected=(filters && filters.size === "mediano")) Mediano
            option(value="grande" selected=(filters && filters.size === "grande")) Grande
        
        .form-group
          label(for="gender") G칠nero
          select#gender(name="gender")
            option(value="" selected=(!filters || !filters.gender)) Ambos
            option(value="macho" selected=(filters && filters.gender === "macho")) Macho
            option(value="hembra" selected=(filters && filters.gender === "hembra")) Hembra
        
        .form-group
          label(for="name") Buscar por nombre
          input#name(type="text" name="name" placeholder="Ej: Max, Luna..." value=(filters && filters.name ? filters.name : ""))
        
        button.button.search-button(type="submit") Buscar Mascotas
        a.button.button-secondary(href="/") Volver al inicio

    .search-results
      h2 Resultados de B칰squeda
      if results && results.length > 0
        .results-grid
          each pet in results
            .pet-card
              if pet.image && pet.image !== ""
                .pet-image
                  img(src=pet.image alt=pet.name onerror="this.onerror=null; this.parentElement.innerHTML='<span style=\\'font-size: 4em;\\'>游</span>';")
              else
                .pet-image-placeholder
                  span 游
              h3= pet.name
              p.pet-info 
                strong Tipo: 
                span= pet.type
              p.pet-info 
                strong Edad: 
                span= pet.age
              p.pet-info 
                strong Tama침o: 
                span= pet.size
              p.pet-info 
                strong G칠nero: 
                span= pet.gender
              if pet.description
                p.pet-description= pet.description.length > 100 ? pet.description.substring(0, 100) + '...' : pet.description
              if pet.location
                p.pet-info 
                  strong Ubicaci칩n: 
                  span= pet.location
              if pet.vaccinated !== undefined
                p.pet-info 
                  strong Vacunado: 
                  span= pet.vaccinated ? 'S칤' : 'No'
              a.button.button-small(href="/pet/" + pet.id) Ver Detalles
      else
        .no-results
          p.message Encuentra tu mascota perfecta usando los filtros de b칰squeda arriba.
          p.submessage Por ahora, puedes filtrar por tipo, edad, tama침o y g칠nero.

